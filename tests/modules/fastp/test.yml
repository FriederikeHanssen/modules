- name: fastp test_fastp_single_end
  command: nextflow run ./tests/modules/fastp -entry test_fastp_single_end -c ./tests/config/nextflow.config  -c ./tests/modules/fastp/nextflow.config
  tags:
    - fastp
  files:
    - path: output/fastp/test.fastp.fastq.gz
      md5sum: dc08e42319d0deab088da4d8600aa2bd
    - path: output/fastp/test.fastp.html
      contains:
        - "Q20 bases:</td><td class='col2'>12.922000 K (92.984097%)"
        - "single end (151 cycles)"
    - path: output/fastp/test.fastp.json
      md5sum: 7ee735cefb67f549dc857eefb9e7f123
    - path: output/fastp/test.fastp.log
      md5sum: 1a12e5579507689de5bff813fe494042

- name: fastp test_fastp_paired_end
  command: nextflow run ./tests/modules/fastp -entry test_fastp_paired_end -c ./tests/config/nextflow.config  -c ./tests/modules/fastp/nextflow.config
  tags:
    - fastp
  files:
    - path: output/fastp/test.fastp.html
      contains:
        - "Q20 bases:</td><td class='col2'>25.719000 K (93.033098%)"
        - "The input has little adapter percentage (~0.000000%), probably it's trimmed before."
    - path: output/fastp/test.fastp.json
      md5sum: cfc3e8b871b9bc770f1dc16432d64e67
    - path: output/fastp/test.fastp.log
      md5sum: 8b1e318b1ae7b1bc23da61d4b4904bf7
    - path: output/fastp/test_1.fastp.fastq.gz
      md5sum: dc08e42319d0deab088da4d8600aa2bd
    - path: output/fastp/test_2.fastp.fastq.gz
      md5sum: e59d0d65cc8c2801f1b970df601fc207

- name: fastp test_fastp_single_end_trim_fail
  command: nextflow run ./tests/modules/fastp -entry test_fastp_single_end_trim_fail -c ./tests/config/nextflow.config  -c ./tests/modules/fastp/nextflow.config
  tags:
    - fastp
  files:
    - path: output/fastp/test.fail.fastq.gz
      md5sum: d865374adfc4228cd17e5bf1e5a3df10
    - path: output/fastp/test.fastp.fastq.gz
      md5sum: dc08e42319d0deab088da4d8600aa2bd
    - path: output/fastp/test.fastp.html
      contains:
        - "Q20 bases:</td><td class='col2'>12.922000 K (92.984097%)"
        - "single end (151 cycles)"
    - path: output/fastp/test.fastp.json
      md5sum: feafc4181a2a61b4b52d9c2b59b419ad
    - path: output/fastp/test.fastp.log
      md5sum: f06f5dea2ba676557509e6eff412ec40

- name: fastp test_fastp_paired_end_trim_fail
  command: nextflow run ./tests/modules/fastp -entry test_fastp_paired_end_trim_fail -c ./tests/config/nextflow.config  -c ./tests/modules/fastp/nextflow.config
  tags:
    - fastp
  files:
    - path: output/fastp/test.fastp.html
      contains:
        - "Q20 bases:</td><td class='col2'>25.719000 K (93.033098%)"
        - "The input has little adapter percentage (~0.000000%), probably it's trimmed before."
    - path: output/fastp/test.fastp.json
      md5sum: 5750c4e642f2473af496cfc3387c2874
    - path: output/fastp/test.fastp.log
      md5sum: d23a9c475354690af8d2b63e28fbd910
    - path: output/fastp/test_1.fail.fastq.gz
      md5sum: d41d8cd98f00b204e9800998ecf8427e
    - path: output/fastp/test_1.fastp.fastq.gz
      md5sum: dc08e42319d0deab088da4d8600aa2bd
    - path: output/fastp/test_2.fail.fastq.gz
      md5sum: dd14e743d3d0d3e95e8c8b0d0893b415
    - path: output/fastp/test_2.fastp.fastq.gz
      md5sum: e59d0d65cc8c2801f1b970df601fc207

- name: fastp test_fastp_paired_end_merged
  command: nextflow run ./tests/modules/fastp -entry test_fastp_paired_end_merged -c ./tests/config/nextflow.config  -c ./tests/modules/fastp/nextflow.config
  tags:
    - fastp
  files:
    - path: output/fastp/test.fastp.html
      contains:
        - "<div id='After_filtering__merged__quality'>"
    - path: output/fastp/test.fastp.json
      md5sum: 045785e81e3327920c88e6948b8e077f
    - path: output/fastp/test.fastp.log
      md5sum: 0090eae9e60f4145595df2a11a4a62b1
    - path: output/fastp/test.merged.fastq.gz
      md5sum: eb6298f0394e6bc5bf82174fd37b84ce
    - path: output/fastp/test_1.fastp.fastq.gz
      md5sum: c447931fbacba27b40da990a8a91d36b
    - path: output/fastp/test_2.fastp.fastq.gz
      md5sum: 3d3326285c02e5db86802c9981f09a39
